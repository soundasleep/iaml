<%@jet imports="org.eclipse.jet.xpath.* org.openiaml.model.model.* org.openiaml.model.model.operations.* org.openiaml.model.model.visual.* org.openiaml.model.model.wires.* org.eclipse.emf.ecore.*" %>
<%-- 
 dump out the root as a sitemap.
 also generate each of the sub pages. 
--%>
<html>
<head>
	<title>generated application '<c:get select="/InternetApplication/@name" default="(untitled)" />': sitemap</title>
</head>
<body>
<h1>Sitemap for <c:get select="/InternetApplication/@name" default="(untitled)" /></h1>

<ol>
	<c:iterate select="/InternetApplication/children" var="child">
		<%
		// this code is for an xpath that could possibly be more than one...
		// since we are using c:iterate, we know we only have one!
		// EObject child = (EObject) ((NodeSet) context.getVariable("child")).toArray()[0];
		EObject child = (EObject) context.getVariable("child");
		context.setVariable("isPage", (child instanceof Page ? "true" : ""));
		%>
		<c:if test="$isPage">
			<li>
				<a href="<c:get select="$child/@id" />.html"><c:get select="$child/@name" /></a>
			</li>
		</c:if>
	</c:iterate>
</ol>

</body>
</html>