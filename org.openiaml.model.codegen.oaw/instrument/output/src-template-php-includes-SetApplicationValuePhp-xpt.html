<html><style>body,html,th,td{font-family:Arial;}.none{background:#fcc;}.oaw{background:#ffc;}.php{color:green;}pre{background:#eee;border:1px solid #666;}</style><body><h1>C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt</h1>

<a href="index.html">Summary</a><ul><li class="none">no execution</li><li class="oaw">OAW execution</li><li class="php">PHP execution</li></ul>

<p><pre>«IMPORT iaml»

«EXTENSION template::GeneratorExtensions»

<span class="oaw php " title="4 steps in OAW 10 steps in PHP (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 5:DEFINE setApplicationValuePhp FOR model::InternetApplication-)"><a name="setApplicationValuePhp.html">«DEFINE setApplicationValuePhp FOR model::InternetApplication-»</a>
&lt;?php
/**
 * For setting an application value.
 */
 
require("header.php");

// queue up any log messages
queue_log_messages(true);

log_message("set_application_value.php? " . print_r($_GET, true));

// expand any domain instances
<a href="src-template-template-php-DomainInstance-xpt.html#expandDomainAttributes.html">«EXPAND template::php::DomainInstance::expandDomainAttributes FOR this-»</a>
<a href="src-template-template-php-DomainInstance-xpt.html#expandDomainObjects.html">«EXPAND template::php::DomainInstance::expandDomainObjects FOR this-»</a>

// the property to set
$id = $_GET["id"] or throw_new_IamlRuntimeException("no id");

// the current page ID we are on
$page_id = $_GET["page"] or throw_new_IamlRuntimeException("no page id");

// the value to set the property to
$arg0 = $_GET["arg0"] or throw_new_IamlRuntimeException("no arg0");

set_application_value($id, $arg0);
log_message("set_application_value.php: setting id=$id, arg0=$arg0");

echo "ok";

/* Is there additional actions we should do on the client-side once this
 * property has changed? */
try {
	<a href="#potentialUpdatesRequired.html">«EXPAND potentialUpdatesRequired FOREACH allApplicationElementProperties(this)»</a>
} catch (IamlRuntimeException $e) {
	// redirect to the exception page
	$url = "exception.php?fail=" . urlencode($e-&gt;getMessage() . " [from setApplicationValue]");
	log_message(print_r($e, true));
	log_message("[update exception handler] Redirecting to '$url' (fail)");

	log_message("redirect " 
		. escape_parameter_string($url));
	echo "\nredirect " 
		. escape_parameter_string($url);				
	die;
}

«ENDDEFINE»</span>

<span class="oaw php " title="24 steps in OAW 50 steps in PHP (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 55:DEFINE potentialUpdatesRequired FOR model::ApplicationElementProperty)"><a name="potentialUpdatesRequired.html">«DEFINE potentialUpdatesRequired FOR model::ApplicationElementProperty»</a>
	if ($id == "«safeName()-»") {
		/* Property "«name-»" («id-») */
		
		«REM»is this property used as the input for a SelectWire?«ENDREM»
		«REM»is this property's parent used as the input for a SelectWire?«ENDREM»
		<span class="oaw " title="8 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 61:IF eContainer.metaType.isAssignableFrom(model::visual::InputTextField))">«IF eContainer.metaType.isAssignableFrom(model::visual::InputTextField)»
			<a href="#potentialContainerUpdates.html">«EXPAND potentialContainerUpdates FOR (model::visual::InputTextField) eContainer»</a>
		«ENDIF»</span>
	}
«ENDDEFINE»</span>

<span class="oaw " title="8 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 67:DEFINE potentialContainerUpdates FOR model::visual::InputTextField)"><a name="potentialContainerUpdates.html">«DEFINE potentialContainerUpdates FOR model::visual::InputTextField»</a>
	<a href="#potentialUpdates.html">«EXPAND potentialUpdates FOREACH outEdges»</a>
«ENDDEFINE»</span>

<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 71:DEFINE potentialUpdates FOR model::WireEdge)"><a name="potentialUpdates.html">«DEFINE potentialUpdates FOR model::WireEdge»</a>
	<a href="#exception.html">«EXPAND exception FOR throwException("Unknown potential update wire edge: " + this)»</a>
«ENDDEFINE»</span>

<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 75:DEFINE potentialUpdates FOR model::wires::ParameterWire)"><a name="potentialUpdates.html">«DEFINE potentialUpdates FOR model::wires::ParameterWire»</a>
	/* ParameterWire "«this-»" */
	<a href="#potentialUpdatesParameter.html">«EXPAND potentialUpdatesParameter FOR to»</a>
«ENDDEFINE»</span>
<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 79:DEFINE potentialUpdates FOR model::wires::SyncWire)"><a name="potentialUpdates.html">«DEFINE potentialUpdates FOR model::wires::SyncWire»</a>
	/* SyncWire "«this-»" */
	<a href="#potentialUpdatesParameter.html">«EXPAND potentialUpdatesParameter FOR from»</a>
	<a href="#potentialUpdatesParameter.html">«EXPAND potentialUpdatesParameter FOR to»</a>
«ENDDEFINE»</span>

<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 85:DEFINE potentialUpdatesParameter FOR model::WireEdgesSource)"><a name="potentialUpdatesParameter.html">«DEFINE potentialUpdatesParameter FOR model::WireEdgesSource»</a>
	/* ignore «this» */
«ENDDEFINE»</span>
<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 88:DEFINE potentialUpdatesParameter FOR model::WireEdgeDestination)"><a name="potentialUpdatesParameter.html">«DEFINE potentialUpdatesParameter FOR model::WireEdgeDestination»</a>
	/* ignore «this» */
«ENDDEFINE»</span>

<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 92:DEFINE potentialUpdatesParameter FOR model::wires::SelectWire)"><a name="potentialUpdatesParameter.html">«DEFINE potentialUpdatesParameter FOR model::wires::SelectWire»</a>
	/* SelectWire "«this-»" */
	<a href="#potentialUpdateDestination.html">«EXPAND potentialUpdateDestination FOR to»</a>
«ENDDEFINE»</span>

<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 97:DEFINE potentialUpdateDestination FOR model::WireEdgeDestination)"><a name="potentialUpdateDestination.html">«DEFINE potentialUpdateDestination FOR model::WireEdgeDestination»</a>
	<a href="#exception.html">«EXPAND exception FOR throwException("Unknown update wire edge destination: " + this)»</a>
«ENDDEFINE»</span>

<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 101:DEFINE potentialUpdateDestination FOR model::DomainObjectInstance)"><a name="potentialUpdateDestination.html">«DEFINE potentialUpdateDestination FOR model::DomainObjectInstance»</a>
	/* DomainObjectInstance "«this-»" */
	$object = get_object_instance_«safeName()»(); // parameters are from server-side
	<a href="#potentialUpdateDestinationAttributes.html">«EXPAND potentialUpdateDestinationAttributes FOREACH attributes»</a>
	
	<a href="#potentialUpdateDesinationWires.html">«EXPAND potentialUpdateDesinationWires FOREACH inEdges.typeSelect(model::wires::SyncWire)»</a>
	<a href="#potentialUpdateDesinationWires.html">«EXPAND potentialUpdateDesinationWires FOREACH outEdges.typeSelect(model::wires::SyncWire)»</a>
«ENDDEFINE»</span>

<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 110:DEFINE potentialUpdateDestination FOR model::DomainAttributeInstance)"><a name="potentialUpdateDestination.html">«DEFINE potentialUpdateDestination FOR model::DomainAttributeInstance»</a>
	/* DomainAttributeInstance "«this-»" */
	$value = get_attribute_instance_«safeName()»(); // parameters are from server-side
	<a href="#potentialUpdateDesinationWires.html">«EXPAND potentialUpdateDesinationWires FOREACH inEdges.typeSelect(model::wires::SyncWire)»</a>
	<a href="#potentialUpdateDesinationWires.html">«EXPAND potentialUpdateDesinationWires FOREACH outEdges.typeSelect(model::wires::SyncWire)»</a>
«ENDDEFINE»</span>

<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 117:DEFINE potentialUpdateDestinationAttributes FOR model::DomainAttributeInstance)"><a name="potentialUpdateDestinationAttributes.html">«DEFINE potentialUpdateDestinationAttributes FOR model::DomainAttributeInstance»</a>
	/* attribute "«name»" («this») */
	$value = $object["«safeNameString(name)-»"];
	<a href="#potentialUpdateDesinationWires.html">«EXPAND potentialUpdateDesinationWires FOREACH inEdges.typeSelect(model::wires::SyncWire)»</a>
	<a href="#potentialUpdateDesinationWires.html">«EXPAND potentialUpdateDesinationWires FOREACH outEdges.typeSelect(model::wires::SyncWire)»</a>
«ENDDEFINE»</span>

<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 124:DEFINE potentialUpdateDesinationWires FOR model::wires::SyncWire)"><a name="potentialUpdateDesinationWires.html">«DEFINE potentialUpdateDesinationWires FOR model::wires::SyncWire»</a>
	/* SyncWire "«this-»" */
	<a href="#outgoingValue.html">«EXPAND outgoingValue FOR from»</a>
	<a href="#outgoingValue.html">«EXPAND outgoingValue FOR to»</a>
«ENDDEFINE»</span>

<span class="oaw " title="2 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 130:DEFINE outgoingValue FOR model::WireEdgesSource)"><a name="outgoingValue.html">«DEFINE outgoingValue FOR model::WireEdgesSource»</a>
«ENDDEFINE»</span>
<span class="oaw " title="2 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 132:DEFINE outgoingValue FOR model::WireEdgeDestination)"><a name="outgoingValue.html">«DEFINE outgoingValue FOR model::WireEdgeDestination»</a>
«ENDDEFINE»</span>
<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 134:DEFINE outgoingValue FOR model::visual::InputTextField)"><a name="outgoingValue.html">«DEFINE outgoingValue FOR model::visual::InputTextField»</a>
	<a href="#outgoingValue.html">«EXPAND outgoingValue FOREACH properties.select(e|e.name=="fieldValue")»</a>
«ENDDEFINE»</span>

<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 138:DEFINE outgoingValue FOR model::ApplicationElementProperty)"><a name="outgoingValue.html">«DEFINE outgoingValue FOR model::ApplicationElementProperty»</a>
	if ($page_id == "«safeNameString(containingPage(this).id)-»") {
		/* the property "«this»" needs to be updated on the client */
		<span class="oaw " title="4 steps in OAW (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 141:IF eContainer.metaType.isAssignableFrom(model::visual::InputTextField))">«IF eContainer.metaType.isAssignableFrom(model::visual::InputTextField)»
			log_message("outgoing value to '«eContainer»' («safeNameString(((model::visual::InputTextField) eContainer).id)»): '$value'");
			log_message("set_value " 
				. escape_parameter_string("«safeNameString(((model::visual::InputTextField) eContainer).id)»")
				. " "
				. escape_parameter_string($value));
			echo "\nset_value " 
				. escape_parameter_string("«safeNameString(((model::visual::InputTextField) eContainer).id)»")
				. " "
				. escape_parameter_string($value);				
		«ENDIF»</span>
	}
«ENDDEFINE»</span>

<span class="none" title="(C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.oaw\src\template\php\includes\SetApplicationValuePhp.xpt: 155:DEFINE exception FOR Object)"><a name="exception.html">«DEFINE exception FOR Object»</a>
«ENDDEFINE»</span></pre></p></html>