<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Coverage: CreateDatabasePhp.xpt</title>
	<link rel="stylesheet" type="text/css" href="default.css" />
</head>
<body>

<h1>CreateDatabasePhp.xpt</h1>

<a href="index.html">Summary</a>

<ul id="legend">
	<li class="none">Never executed</li>
	<li class="oaw">Generated output</li>
	<li class="php">Executed on server (PHP)</li>
	<li class="js">Executed on client (Javascript)</li>
</ul>

<p><pre>«IMPORT iaml»

«EXTENSION template::GeneratorExtensions»

<span class="oaw php " title="19 steps in OAW 64 steps in PHP (C:\Documents and Settings\jmwright.MASSEY\workspace-iaml\org.openiaml.model.codegen.php\src\template\php\includes\CreateDatabasePhp.xpt: 5:DEFINE createDatabasePhp FOR model::InternetApplication)"><a name="createDatabasePhp.html">«DEFINE createDatabasePhp FOR model::InternetApplication»</a>
&lt;?php

<a href="src-template-template-php-CreateDomainStorePhp-xpt.html#createDomainStorePhp.html">«EXPAND template::php::CreateDomainStorePhp::createDomainStorePhp FOREACH domainStores-»</a>
<a href="src-template-template-php-CreateDomainStorePhp-xpt.html#createDomainObjectPhp_Root.html">«EXPAND template::php::CreateDomainStorePhp::createDomainObjectPhp_Root FOREACH children-»</a>

function store_db($attribute_id, $arg0) {
	register_running_functions();

	$function_id = $attribute_id;
	if (has_running_function($function_id)) {
		log_message("Breaking out of infinite loop: $function_id");
		return false;
	}
	
	/*
	 * a simple solution (but not scalable TODO): create a new HTTP request to store the event.
	 * a better solution is obiously to store the new event in this same page.
	 */
	$url = get_baseurl() . "/store_db.php?attribute_id=".urlencode($attribute_id)."&amp;arg0=".urlencode($arg0);
	
	log_message("create_database.php:store_db calling $url");
	$result = call_remote_url($url);

	if (trim($result) != "ok")
		throw new IamlRuntimeException("store_event failed: \"" . $result . "\"");
		
	return true;
}
«ENDDEFINE»</span>
</pre></p>

</body>
</html>