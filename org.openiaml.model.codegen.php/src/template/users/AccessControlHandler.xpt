«IMPORT iaml»

/**
 * Code behind AccessControlHandlers.
 *
 */
«EXTENSION template::GeneratorExtensions»

/**
 * Domain instance methods.
 */
«DEFINE accessControlHandlerOperationCall(Boolean php, model::wires::RunAction wire, model::components::AccessControlHandler object) FOR model::WireDestination»
	«throwException("Unexpected accessControlHandlerOperationCall run instance wire destination: " + this)»
«ENDDEFINE»

«DEFINE accessControlHandlerOperationCall(Boolean php, model::wires::RunAction wire, model::components::AccessControlHandler object) FOR model::ActionEdgeDestination»
	«throwException("Unexpected accessControlHandlerOperationCall run instance action destination: " + this)»
«ENDDEFINE»

«DEFINE accessControlHandlerOperationCall(Boolean php, model::wires::RunAction wire, model::components::AccessControlHandler object) FOR model::Operation»
	«IF php»
		«IF name=="check permissions"»
			«REM»
				the AccessControlHandler will have an incoming ParameterWire
				with the UserInstance in which to validate against
			«ENDREM»
			access_control_permissions_check_«safeNameString(object.id)»()
		«ELSE»
			«throwException("No server-side code for accessControlHandlerOperationCall operation '" + name + "'")»
		«ENDIF»
	«ELSE»
		«IF name=="check permissions"»
			«REM»
				for now, we just bail
			«ENDREM»
			throwJavascriptException("'check permissions' function not implemented on client-side")
		«ELSE»
			«throwException("No client-side code for accessControlHandlerOperationCall operation '" + name + "'")»
		«ENDIF»
	«ENDIF» 
«ENDDEFINE»
