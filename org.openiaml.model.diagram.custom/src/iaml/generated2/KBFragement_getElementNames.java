package iaml.generated2;

import nz.org.take.rt.*;


/**
 * Class generated by the take compiler.
 * @version Tue Oct 14 21:54:19 NZDT 2008
 */
@SuppressWarnings("unchecked")
class KBFragement_getElementNames {
    /**
     * Method generated for query /input_form_name[out,out]
     * @return an iterator for instances of NamedElement_Name
    */
    public static ResultSet<NamedElement_Name> getElementNames() {
        DerivationController _derivation = new DefaultDerivationController();
        ResultSet<NamedElement_Name> _result = new ResultSet(KBFragement_getElementNames.getElementNames(
                    _derivation), _derivation);

        return _result;
    }

    /**
     * Method generated for query /input_form_name[out,out]
     * @return an iterator for instances of NamedElement_Name
    */
    static ResourceIterator<NamedElement_Name> getElementNames(
        final DerivationController _derivation) {
        final int _derivationlevel = _derivation.getDepth();
        ResourceIterator<NamedElement_Name> result = new IteratorChain<NamedElement_Name>(2) {
                public Object getIteratorOrObject(int pos) {
                    switch (pos) {
                    // rule1  IF /app_name([app],test) AND /app_children([app],[page]) AND /page_name([page],generated) AND /element_children([page],[input_form]) THEN /input_form_name([input_form],generated form)
                    case 0:
                        return getElementNames_0(_derivation.reset(
                                _derivationlevel));

                    // factsInputForm_Name nz.org.take.ExternalFactStore@1171b26
                    case 1:
                        return getElementNames_1(_derivation.reset(
                                _derivationlevel));

                    default:
                        return EmptyIterator.DEFAULT;
                    } // switch(pos)
                } // getIterator()

                public String getRuleRef(int pos) {
                    switch (pos) {
                    // rule1  IF /app_name([app],test) AND /app_children([app],[page]) AND /page_name([page],generated) AND /element_children([page],[input_form]) THEN /input_form_name([input_form],generated form)
                    case 0:
                        return "rule1";

                    // factsInputForm_Name nz.org.take.ExternalFactStore@1171b26
                    case 1:
                        return "factsInputForm_Name";

                    default:
                        return "";
                    } // switch(pos)
                } // getRuleRef()
            };

        return result;
    }

    /**
     * Method generated for query /input_form_name[out,out]
     * @return an iterator for instances of NamedElement_Name
    */
    private static ResourceIterator<NamedElement_Name> getElementNames_0(
        final DerivationController _derivation) {
        _derivation.log("rule1", DerivationController.RULE,
            DerivationController.NIL, DerivationController.NIL);

        // Variable bindings in rule:  IF /app_name([app],test) AND /app_children([app],[page]) AND /page_name([page],generated) AND /element_children([page],[input_form]) THEN /input_form_name([input_form],generated form)
        class bindingsInRule1 {
            // Property generated for term  "generated"
            java.lang.String p1;

            // Property generated for term  "[input_form]"
            org.openiaml.model.model.visual.InputForm p2;

            // Property generated for term  "generated form"
            java.lang.String p3;

            // Property generated for term  "test"
            java.lang.String p4;

            // Property generated for term  "[page]"
            org.openiaml.model.model.visual.Page p5;

            // Property generated for term  "[app]"
            org.openiaml.model.model.InternetApplication p6;
        }
        ;

        final bindingsInRule1 bindings = new bindingsInRule1();
        bindings.p1 = "generated";
        bindings.p2 = Constants.input_form;
        bindings.p3 = "generated form";
        bindings.p4 = "test";
        bindings.p5 = Constants.page;
        bindings.p6 = Constants.app;

        // code for prereq /app_name([app],test)
        final ResourceIterator<app_name> iterator1 = KBFragement_app_name_11.app_name_11(Constants.app,
                "test", _derivation.increaseDepth());

        // code for prereq /app_children([app],[page])
        final ResourceIterator<InternetApplication_Children> iterator2 = new NestedIterator<app_name, InternetApplication_Children>(iterator1) {
                public ResourceIterator<InternetApplication_Children> getNextIterator(
                    app_name object) {
                    bindings.p6 = Constants.app;
                    bindings.p4 = "test";

                    return KBFragement_getAppChildren.getAppChildren(bindings.p6,
                        bindings.p5, _derivation.increaseDepth());
                }
            };

        // code for prereq /page_name([page],generated)
        final ResourceIterator<page_name> iterator3 = new NestedIterator<InternetApplication_Children, page_name>(iterator2) {
                public ResourceIterator<page_name> getNextIterator(
                    InternetApplication_Children object) {
                    bindings.p6 = Constants.app;
                    bindings.p5 = Constants.page;

                    return KBFragement_page_name_11.page_name_11(bindings.p5,
                        bindings.p1, _derivation.increaseDepth());
                }
            };

        // code for prereq /element_children([page],[input_form])
        final ResourceIterator<ApplicationElementContainer_Children> iterator4 = new NestedIterator<page_name, ApplicationElementContainer_Children>(iterator3) {
                public ResourceIterator<ApplicationElementContainer_Children> getNextIterator(
                    page_name object) {
                    bindings.p5 = Constants.page;
                    bindings.p1 = "generated";

                    return KBFragement_getElementChildren.getElementChildren(bindings.p5,
                        bindings.p2, _derivation.increaseDepth());
                }
            };

        // code for prereq /input_form_name([input_form],generated form)
        final ResourceIterator<NamedElement_Name> iterator5 = new NestedIterator<ApplicationElementContainer_Children, NamedElement_Name>(iterator4) {
                public ResourceIterator<NamedElement_Name> getNextIterator(
                    ApplicationElementContainer_Children object) {
                    bindings.p5 = Constants.page;
                    bindings.p2 = Constants.input_form;

                    return new SingletonIterator(new NamedElement_Name(
                            bindings.p2, bindings.p3));
                }
            };

        return iterator5;
    }

    /**
     * Method generated for query /input_form_name[out,out]
     * @return an iterator for instances of NamedElement_Name
    */
    private static ResourceIterator<NamedElement_Name> getElementNames_1(
        final DerivationController _derivation) {
        _derivation.log("factsInputForm_Name",
            DerivationController.EXTERNAL_FACT_SET, DerivationController.NIL,
            DerivationController.NIL);

        return FactStores.factsInputForm_Name.fetch(null, null);
    }
}
