[< 0.2](Model0_2.md) | **0.3** | [0.4 >](Model0_4.md)

# Model 0.3 #



# Introduction #

This model release adds some fundamental new model elements such as domain object, domain object instances, and sessions.

Existing [atomic operations](IamlOperations.md) and [composite operations](IamlCompositeOperations.md) are now documented.

Generated web application runtime code is now formatted through the side project [iacleaner 0.2](http://code.google.com/p/iacleaner/). ([issue 13](http://code.google.com/p/iaml/issues/detail?id=13))

## Usability Features ##

Diagram editors now reliably render both contained elements and referenced shortcut elements, even if they are not directly contained within the diagram root element. ([issue 47](http://code.google.com/p/iaml/issues/detail?id=47))
  * This means that if a model element is connected to another element elsewhere in the model, a shortcut of the referenced model element will be rendered in the current editor, and the link will still be displayed.
  * This is usually limited to direct connections, however incoming ParameterWires to RunInstanceWires will also be rendered.

You can select a model element and generate all elements that should be contained within it.
  * Simply right click a model element and select "_Infer all contained elements_".
  * Thanks to a proven property in an upcoming paper, this partial inference is guaranteed to not affect the final generation of the model, although changes to the generated elements may do so.
  * There still needs to be a way to delete contained generated elements.

Three new inference actions use the Drools inference engine to infer new knowledge about a given model element. These can be accessed by right clicking an element in the editor, and selecting _IAML Model_ > _(action name)_. More information is available in the _Knowledge Inference_ section below.

Model elements render the names of their parent elements; this is to help with identifying the source of shortcut elements. ([issue 40](http://code.google.com/p/iaml/issues/detail?id=40))

A copy of the given model instance diagram can be exported automatically to PNG by right clicking the .iaml\_diagram file, and selecting "_Export all diagram parts to PNG images_". ([issue 9](http://code.google.com/p/iaml/issues/detail?id=9))

Models can be migrated between different versions: See ModelMigration.

## Generated Elements ##

When deleting a generated element, all elements generated by that element will also be removed ([issue 29](http://code.google.com/p/iaml/issues/detail?id=29) - [GeneratedElementDeleter.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model/src/org/openiaml/model/diagramextensions/GeneratedElementDeleter.java)).

If you try and delete a generated element that, in some way, is used elsewhere by the application, you will now get a warning message asking if you'd still like to continue with removing it ([GeneratedElementHandler.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model/src/org/openiaml/model/diagramextensions/GeneratedElementHandler.java)).

In particular, if a generated element - or one of its directly contained generated elements, or one of the other elements generated by it, all recursively - is connected via a WireEdge, ExecutionEdge or DataFlowEdge to another element which is _not_ generated, a message box will show with information on:
  * Which non-generated elements are connected to this element
  * Which contained generated elements have non-generated connections
  * Which related generated elements have non-generated connections

# Knowledge Inference #

## New Instance Wires ##

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/images/NewInstanceWireMapping-3.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/images/NewInstanceWireMapping-3.png)

| **Inference and Runtime Tests** | [NewInstanceWireMapping.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/NewInstanceWireMapping.java) |
|:--------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Inference Rules** | [runtime/new-instance.drl](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.drools/rules/runtime/new-instance.drl) |

If a _NewInstanceWire_ is connected from a _DomainObject_ to a _DomainObjectInstance_, the attributes from the _DomainObject_ will automatically populate the _DomainObjectInstance_ unless [overridden](OverridingGeneration.md).

## Input Form Population ##

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/images/InputFormInstanceMapping-1.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/images/InputFormInstanceMapping-1.png)

| **Inference and Runtime Tests** | [InputFormInstanceMapping.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/InputFormInstanceMapping.java) |
|:--------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Inference Rules** | [sync-wires.drl ](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.drools/rules/sync-wires.drl) |
| **Menu Title** | _Refresh all Form Mappings_ |
| **UI Action** | [RefreshFormMappingsWithDrools.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.diagram.custom/src/org/openiaml/model/diagram/custom/actions/RefreshFormMappingsWithDrools.java) |

If an _InputForm_ is connected to a _DomainObjectInstance_ or _DomainObject_, then attributes within the instance will automatically create editable _InputTextFields_ within the form.

Following the inference below of SyncWires with ApplicationElements, these new text fields will also automatically sync up.

## Domain Stores from Properties files ##

| **Inference and Runtime Tests** | [PropertiesFileMapping.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/PropertiesFileMapping.java) |
|:--------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Inference Rules** | [runtime/file-domain-object.drl](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.drools/rules/runtime/file-domain-object.drl) |
| **Menu Title** | _Refresh all DomainStore Mappings_ |
| **UI Action** | [RefreshDomainStoreMappingsWithDrools.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.diagram.custom/src/org/openiaml/model/diagram/custom/actions/RefreshDomainStoreMappingsWithDrools.java) |

If a _DomainStore_ is of type _PropertiesFile_, the _DomainStore_ will be automatically populated from the values in the _PropertiesFile_ (in particular, this will create a _DomainObject_ named "properties", and all properties in the file will be added as attributes).

## Sync Wires with Application Elements ##

| **Inference and Runtime Tests** | [InputFormInstanceMapping.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/InputFormInstanceMapping.java) |
|:--------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Inference Rules** | [sync-wires.drl](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.drools/rules/sync-wires.drl) |
| **UI Action** | [RefreshFormMappingsWithDrools.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.diagram.custom/src/org/openiaml/model/diagram/custom/actions/RefreshFormMappingsWithDrools.java) |

If two _ApplicationElements_ are connected via a _SyncWire_ labelled "sync", and these elements both contain other elements that match to each other (currently through a case-insensitive naming match), these elements will also gain a _SyncWire_ between each other.

## Domain Object Instance Mappings ##

| **Inference and Runtime Tests** | [NewInstanceWireMapping.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/NewInstanceWireMapping.java) |
|:--------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Inference Rules** | [runtime/new-instance.drl](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.drools/rules/runtime/new-instance.drl) |
| **Menu Title** | _Refresh all DomainObjectInstance Mappings_ |
| **UI Action** | [RefreshObjectInstanceMappingsWithDrools.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.diagram.custom/src/org/openiaml/model/diagram/custom/actions/RefreshObjectInstanceMappingsWithDrools.java) |

If a _DomainObject_ is connected to a _DomainObjectInstance_ via a _NewInstanceWire_, this action will populate the object instance with _DomainAttributeInstance\_s matching the attributes within the_DomainObject_._

# New Elements #

## Sessions ##
| **Description** | ApplicationElementProperties stored within a Session (i.e. text field values, login keys) are only available to a single session user. When the session is closed, the values are lost. |
|:----------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Models** | [Session\*.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/) |
| **Inference Tests** | - |
| **Runtime Tests** | [Session\*.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/) |

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/images/SessionSyncWires.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/images/SessionSyncWires.png)

## Operation/Condition Modelling (2) ##

**Temporary Variables**
| **Description** | Within operation or condition modelling, these represent temporary variables. When the operation is finished, the values will have been lost. |
|:----------------|:----------------------------------------------------------------------------------------------------------------------------------------------|

**Execution Flow**
| **Description** | Within operation or condition modelling, the _execution flow_ models the order in which operations are executed. If an operation has multiple outwards ExecutionEdges, they are run in series (ideally they would be parallel). |
|:----------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**Data Flow**
| **Description** | Within operation or condition modelling, the _data flow_ models the flow of dat between elements; for example, from a parameter to a temporary variable, or as a parameter to an operation. |
|:----------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**Start Node**
| **Description** | An operation or condition starts at the start node. |
|:----------------|:----------------------------------------------------|

**Finish Node**
| **Description** | An operation completes at the finish node. In conditions, this means the condition has passed. |
|:----------------|:-----------------------------------------------------------------------------------------------|

**Cancel Node**
| **Description** | If the operation has not completed successfully, then the cancel node acts as a failure or exception-throwing element. The value provided is the exception message thrown. In conditions, this means the condition has failed. |
|:----------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

| **Model** | [DataFlowTemporaryVariable.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/DataFlowTemporaryVariable.iaml) |
|:----------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Inference Tests** | No inference |
| **Runtime Tests** | [DataFlowTemporaryVariable.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/DataFlowTemporaryVariable.java) |

For a discussion of possible operation components and pre-defined composite operations, see [IamlOperations](IamlOperations.md) or [IamlCompositeOperations](IamlCompositeOperations.md).

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/images/DataFlowTemporaryVariable-4.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/images/DataFlowTemporaryVariable-4.png)

## Buttons ##
| **Description** | These represent clickable "buttons" in the user interface. |
|:----------------|:-----------------------------------------------------------|
| **Models** | [ButtonNavigate.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/ButtonNavigate.iaml), [ButtonSetValue.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/ButtonSetValue.iaml) |
| **Inference Tests** | No inference |
| **Runtime Tests** | [ButtonNavigate.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/ButtonNavigate.java), [ButtonSetValue.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/ButtonSetValue.java) |

If a Button contains an EventTrigger labelled _click_ or _onClick_, this EventTrigger will be called when the button is clicked or selected.

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/ButtonSetValue-6.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/ButtonSetValue-6.png)
![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/ButtonSetValue-7.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/ButtonSetValue-7.png)

## Domain Object Instance ##
| **Description** | _DomainObjectInstances_ are instances of a _DomainObject_. They are created by a _NewInstanceWire_. |
|:----------------|:----------------------------------------------------------------------------------------------------|
| **Model** | [NewInstanceObject.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceObject.iaml), [NewInstanceObjectAutosave.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceObjectAutosave.iaml) |
| **Inference Tests** | - |
| **Runtime Tests** | [NewInstanceObject.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceObject.java), [NewInstanceObjectAutosave.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceObjectAutosave.java) |

If "autosave" is set to _false_ on the _DomainObjectInstance_, then changes to the attributes within the instance will not be automatically saved. The "save" operation will have to be called manually.

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/NewInstanceObject-1.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/NewInstanceObject-1.png)

## Domain Attribute Instance ##
| **Description** | Like a _DomainObjectInstance_, except concerned with an attribute. A _DomainObjectInstance_ contains many _DomainAttributeInstances_. |
|:----------------|:--------------------------------------------------------------------------------------------------------------------------------------|
| **Model** | [NewInstanceAttributeSession.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceAttributeSession.iaml), [NewInstanceAttributeSessionAutosave.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceAttributeSessionAutosave.iaml) |
| **Inference Tests** | - |
| **Runtime Tests** | [NewInstanceAttributeSession.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceAttributeSession.java), [NewInstanceAttributeSessionAutosave.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceAttributeSessionAutosave.java) |

_DomainObjectInstances_ and _DomainAttributeInstances_ can be stored within _Sessions_; otherwise, all visitors to the site will access the same instance.

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/NewInstanceAttributeSession.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/NewInstanceAttributeSession.png)
![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/NewInstanceAttributeSession-4.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/NewInstanceAttributeSession-4.png)

## Login Handler (Secret Key) ##
> _See [LoginHandler](LoginHandler.md)_

# New Wires #

## Select Wire ##
| **Description** | Selects existing instances of _DomainObjects_ into _DomainObjectInstances_ |
|:----------------|:---------------------------------------------------------------------------|

**See IamlSelectWire for more information.**

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/SelectFieldFromDynamicObject-1.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/images/SelectFieldFromDynamicObject-1.png)

## New Instance Wire ##
| **Description** | These wires create new instances of _DomainObjects_ and _DomainAttributes_ |
|:----------------|:---------------------------------------------------------------------------|
| **Models** | [NewInstanceObject.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceObject.iaml), [NewInstanceAttributeSession.iaml](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceAttributeSession.iaml) etc |
| **Inference Tests** | Covered above |
| **Runtime Tests** | [NewInstanceObject.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceObject.java), [NewInstanceAttributeSession.java](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/codegen/model0_3/NewInstanceAttributeSession.java) etc |

If the targeted _DomainObjectInstance_ or _DomainAttributeInstance_ is stored within a _Session_, then the new instance will only reside in that session, and will only be saved to the database if "autosave" is enabled or the "save" operation is called.

![http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/images/NewInstanceWireMapping-3.png](http://iaml.googlecode.com/svn/trunk/org.openiaml.model.tests/src/org/openiaml/model/tests/inference/model0_3/images/NewInstanceWireMapping-3.png)